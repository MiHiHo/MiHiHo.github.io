<!DOCTYPE html>
<html>
  <head>
  	<script type="text/javascript" src="d3.min.js"></script>
  </head>
  <body>
  	<script>
  	var data = [42.92, 24.87, 18.99, 8.99, 1.22, 3.01];
  	var r = 300;

  	var color = d3.scale.ordinal()
  		.range(["darkblue", "grey","darkgrey","lightgrey","blue","lightblue"]);

  	var canvas = d3.select("body").append("svg")
  		.attr("width", width)
  		.attr("heigth", heigth);

  	var legend =  d3.selectAll("body").append("svg")
  		.attr("class", "legend")
  		.attr("width", 220)
  		.attr("heigth", 290)
  		.selectAll("g")
  		.data(color.domain().slice())
  		.enter().append("g")
  		.attr("transform", function(d,i) {return "translate(20," + i * 30 + ")"; });

  	legend.append("rect")
  		.attr("width", 25)
  		.attr("height", 25)
  		.style("fill", color);

  	legend.append("text")
  		.attr("x", 30)
  		.attr("y", 15)
  		.attr("dy", ".35em")
  		.text(function(d,i) {return data[i].browser;});

  	var group = canvas.append("g")
  		.attr("transform", "translate(300,300)")

  	var arc = d3.svg.arc()
  		.innerRadius(0)
  		.outerRadius(r)

  	var pie = d3.layout.pie()
  		.value(function(d){return d;});

  	var arcs = group.selectAll(".arc")
  		.data(pie(data))
  		.enter()
  		.append("g")
  		.attr("class", "arc");

  	arcs.append("path")
  		.attr("d", arc)
  		.attr("fill", function(d) {return color(d.data);});

  	arcs.append("text")
  		.attr("transform", function (d) {return "translate(" + arc.centroid(d) + ")";})
  		.attr("text-anchor", "middle")
  		.attr("font-size", "1.5em")
  		.text(function (d) { return d.data;});
  	</script>

  </body>
</html>